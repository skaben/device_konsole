version: "3"

services:
  skabenkonsole:
    build:
      context: .
    volumes:
      - ./conf:/app/conf
      - ./tests:/app/tests
      - ./app.py:/app/app.py
      - ./config.py:/app/config.py
      - ./device.py:/app/device.py
      - ./local.log:/app/local.log
      - ./pytest.ini:/app/pytest.ini
      - .flake8:/app/.flake8
    command: >
       sh -c "pytest /app/ && \
              flake8 /app/"
